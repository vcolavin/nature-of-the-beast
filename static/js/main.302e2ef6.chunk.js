(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e){e.exports=[{slug:"refrigerator",descriptions:["You've opened this nameless white monolith","(discolored, like everything else in this house)","And are standing in its cold light.","The shelves are weighed down with cuts of pork.","And the door full of mason jars of the pig's blood."],locationSlug:"kitchen",takeable:!1},{slug:"cutting_board",descriptions:["A heavy block of maple cut concave from untold thousands of slices and chops,","darkened with blood.","almost exclusively pork, despite your sincere efforts to get your son to eat better.","This you remember well: You were a zealous vegetarian once","Abstaining from eating meat was such an obvious thing to do that you had trouble explaining it","How do you even begin to justify the decision to not commit regular and lethal violence on feeling creatures?","How is that the position that needs justifying in the first place?","It was a plain truth. You knew it like you knew the sky was blue.","In therapy, you were able to express that you felt gaslit by the people you loved and cared for the most.","","Of course, now, your calculus is different.","Now, you just eat what's left."],locationSlug:"kitchen",takeable:!1},{slug:"old_knife",descriptions:["Many objects carry with them anonymity.","This knife does not: it was loved as deeply as an object could be loved.","Its handle polished from the oil and sweat of your hand","Its vicious blade shrunken from being kept sharp enough to shave with.","You learned early on how big of a difference that makes when breaking down a pig."],takeable:!0,locationSlug:"kitchen"},{slug:"king_sized_bed",descriptions:["A mattress brought low with decades of wear and a sick rainbow of stains","in an elegant dark frame."],takeable:!1,locationSlug:"master_bedroom"},{slug:"sliding_door",descriptions:["Through the unclean glass and torn screen door mesh, you see the overgrown backyard.","The door's latch has been welded shut."],locationSlug:"dining_room",takeable:!1},{slug:"dining_table",descriptions:["A circular wooden table, four or five feet across.","The place where Zach sits is worn straight through the veneer","frayed at the edge.","The floor beneath his usual seat is darkly stained, despite your diligent cleaning."],locationSlug:"dining_room",takeable:!1},{slug:"your_car",descriptions:['Your 2004 "jazz blue" Camry sags, exhausted and tarnished and completely undrivable',"Even if you knew where the keys were, you slashed the tires a while back.","It was Zach's idea, but you hardly needed convincing.","By that time you were his accomplice in the systematic dismantlement of your life"],locationSlug:"garage",takeable:!1},{slug:"foot_pump",descriptions:["A black plastic pad with yellow accordion bellows","Attachable via a corrugated black plastic tube to your inflatable mattress."],locationSlug:"your_bedroom",takeable:!0},{slug:"clothing_rack",descriptions:["A dark bronze spindly and arabesque contruction you picked up from a street corner in San Francisco's Inner Sunset district.",'"It\'s amazing what these rich assholes throw away"',"You thought to yourself at the time"],locationSlug:"your_bedroom",takeable:!1},{slug:"washer_dryer",descriptions:["A small and ineffective machine.","You used to have a decent set of dedicated machines but your son sold them","It was one of the few times you can recall questioning a decision of his.","His response was to bolt an after-market coin operation assembly to the top.","And charge $1.76 per load","You haven't done much laundry since then."],locationSlug:"garage",takeable:!1},{slug:"master_bathroom_toilet",descriptions:["A morbid curiosity overtakes you","You don't what to know, but you really want to look.","Standing away from the toilet, on your tip-toes","You peer over the lip of the bowl","Just long enough to see something slick and black","writhe and... pupate? Is that the right word?","It splashes lightly against the side of the bowl."],locationSlug:"master_bathroom",takeable:!1},{slug:"picture",descriptions:["It's of you and your son","Zach.","He is too large to fit entirely within the frame, so you can't see his face","You wonder at your son's proportions","The way he fills the frame.","Was he always that size?","No, right? That's not how children work. He must have grown to be that big.","You are certain of it: You are his mother and you gave birth to him, so he was small and he grew.","Sure as eggs is eggs, as your own mother would have said.","And he has grown to be big and strong, for which you are immensely proud.","Though now in retrospect, you are having trouble remembering his birth","Or even the pregancy","You ","In the picture you are smiling abundantly and hugging"],locationSlug:"foyer",takeable:!0},{slug:"smashed_picture",descriptions:["A picture frame with a spiderweb crack across the glass.","it's you and Henrietta standing atop the Astoria tower","That beautiful bridge in the background","And an endless blue sky.","You're smiling, as though it was the obvious thing to do.","You have full cheeks and dark curling hair"],locationSlug:"master_closet",takeable:!0},{slug:"crumpled_letter",descriptions:["A handwritten letter:","Marla,","This is like my fifth time trying to write this letter.","I want to make sure I am perfect with my words, because I want you to understand how serious this is, and I think you are having trouble understanding right now.","And when I've tried to bring it up, you've gotten mad at me.","Like, real mad.","I don't know what's going on with you, but I don't want to be a boiling frog, or whatever it is you said.","Who is Zach?","You found him on Couchsurfing a couple weeks ago and we thought it'd be fun to have a guest.","Why is he still here?","Why did you give him our bedroom?","Why do you cook for him so much?","We can't afford all the food you're buying for him","And since when do you eat pork?","I think he's gotten even bigger since you started doing that.","And he started calling you mom.","You laughed it off the first time","But now...","you respond.","This shouldn't even need to be said, but I'm not sure right now","We don't have kids.","Remember? We tried IVF with Danny.","Do you actually remember?","You looked at me this morning and I think it took you a second to recall who I was.","Let me be clear:","Zach is a monster,","like, an actual monster, and he is stealing you from me","He is stealing you from yourself.","You get to decide now","Him or me.","Him, or the life we always wanted to have together.","If it's him, I'm leaving. I wish I didn't have to.","But you will always be allowed to change your mind.","When you do, you have my number.","Love,","Henrietta","P.S., you deserve better.","I promise."],locationSlug:"master_closet",takeable:!0},{slug:"big_tree",descriptions:["This must be the largest doug fir in the forest.","It emanates a maternal strength.","In its base is a hollow whose opening is big enough to squeeze into"],locationSlug:"a_quiet_forest",takeable:!1},{slug:"worn_book",descriptions:["The Lord of the Rings","Your favorite book since forever, even though you've grown uncomfortable with its fantasy racism","and tired of its unimaginative depiction of evil.","This is an ostentatious hardback edition with an embossed and gilded cover","It is dusty and tattered from what must be years of re-reading","especially the sections concerning Hobbiton, Lothlorien, and Tom Bombadil.","On the inside front cover is an inscription addressed to you:","M, I finally got you a nicer copy like I promised!","Here's to all the kooky adventures in our future.","Happy birthday, lovebird","- H","You wonder idly who H is."],locationSlug:"a_nook",takeable:!0},{slug:"patio_furniture",descriptions:["Cheap plastic patio furniture from Craigslist,","cracked and yellowed.",'"Starter furniture"',"You had called it optimistically."],locationSlug:"backyard",takeable:!1},{slug:"raised_beds",descriptions:["You had no idea how to build garden beds, so you just kind of went for it.","All things considered, you didn't do a bad job","They're still holding together, though inundated with local flora.","You catch yourself smiling as you recall a trip to the emergency room after smashing your foot with a redwood two-by-six.","It turned out not to be broken, but it still hurt like a motherfucker.","You were pretending to be brave in the passenger seat","(which, you've since learned, is the same thing as actual bravery)","distracting yourself by looking at your driver with mournful love","admiring her steely determination,","her defensive driving,","and her good cheekbones.","What was her name?"],locationSlug:"backyard",takeable:!1},{slug:"table",descriptions:["A table from Ikea.","It has a plain white acrylic top and bright yellow legs.","You chose it for its plain geometry and color.","It seemed honest"],takeable:!1,locationSlug:"kitchen"},{slug:"range",descriptions:['"I feel like a frog in boiling water,"',"you had said in a rare moment of lucidity,","It was a metaphor banal and grotesque","to which you clung like a buoy in a storm",'"it\'s like when I would visit my grandfather as a child,"',"you told your therapist","back when you could still see your therapist",'"there was a mosquito that bit me as I slept."','"I was so itchy that I dreamt of the itch."','"In the dream, I had always felt that discomfort"','"It was unbearable but also unquestionable."',"Anyways,","Zach somehow captured a frog outside and put it in a pot of water on the stove.","As the water warmed up, it tried to jump out","But Zach caught it and placed a heavy lid on the pot.","It jumped and thrashed and splashed until it didn't,","until the water all boiled away and its body burned and its smoke","filled the house","The smell lingered for weeks, and you will never forget it.","Zach smiled triumphantly,","as though he had won the argument."],takeable:!1,locationSlug:"kitchen"},{slug:"shovel",descriptions:["You bought this miniature shovel shortly after moving in","from the hardware store in town.","this was just before your relationship with your son truly blossomed and bore its devastating fruit","like water damage worming through the family photo album.","The handle of this shovel is yellow fiberglass, maybe two feet long","And even though it's spent years in damp neglect","the galvanized scoop is not rusted.","You recall that the scoop is also called a blade","and feel the weapon's comfortable heft in your hand"],takeable:!0,locationSlug:"side_yard"}]},24:function(e){e.exports=[{slug:"a_quiet_forest",descriptions:["You are standing in the center of a congress of douglas fir trees at the top of a hill","lit by the diffuse dawn light of winter.","A ragged path leads away."]},{slug:"a_nook",descriptions:["You squeeze into the hollow at the base of the tree","It is a dry and warm nook among the roots, slightly larger than one might have expected.","It has been picked clear of detritus.","Sitting for a moment on a knuckled and seatlike root,","you feel that you are completely hidden from anyone who might try to find you","and a strong sense that that is a very good thing."]},{slug:"a_path",descriptions:["You walk for a long while. Maybe a mile.","The path turns to mud as you approach the house","and the air becomes large with mildew and rot","An odor which causes your heart to quicken, and your palms to sweat.","You remind yourself that it is daylight, and that at least for now, you are safe","and you walk."]},{slug:"in_front_of_the_house",descriptions:["You are standing in front of your house","a single story of rotting stucco.","The forest is in the process of reclaiming its territory.","You knew white walls would be a problem,","but one summer, Zach demanded that you whitewash the outside of the house","and there was no futher discussion.","A visceral sensation of contempt floods your mouth as you look towards the mossy grey and black streaks.","A sensation aimed at yourself."]},{slug:"side_yard",descriptions:["Zach has used the side yard to hoard his empties ever since he learned that they could be redeemed for cash","You start to do a rough calculation:","Two six packs a day, six days a week","That's thirty-seven hundred a year","But you have lost count of the years."]},{slug:"backyard",descriptions:["You tried to garden here once","You dreamt of rhubarb pie in late winter and tomatillo salsa in summer","You dreamt of bringing these things to the dinner table and sharing them with your friends, your parents.","You half-joked with them that you could direct your mothering instincts towards plants","Seeing as you weren't going to have kids","They didn't laugh.","The yard has been unused and unvisited for a long while:","a space ceded to the wild fertility of the Pacific Northwest","crowded with deer fern and fly agaric."]},{slug:"foyer",descriptions:["You enter the foyer","And the voidish smell of mold hits you like a brick wall","You shut the door gently behind you","Holding the latch down as it closes to muffle the mechanism's click","out of habit."]},{slug:"kitchen",descriptions:["This is where you've spent almost all of your waking hours for some number of years","Preparing large meals of pork for Zach."]},{slug:"dining_room",descriptions:["It's something like a combined dining room and living room, with a wide opening towards the kitchen.","This is the natural heart of the house, where guests could feel warm and cared for","Where you imagined directing the layout of diverse potluck dishes","Appropriately labelling the vegan and gluten-free options.","Checking in with your friend who has the nut allergy,","Asking if nutmeg is okay, even though you know it is,","just to let her know that you care, to help her feel safe.","An electric frisson flows through you as you fantasize the banal performance of love for friends","","","","It is cold now in the dining room."]},{slug:"hallway",descriptions:["When the bedroom doors are closed, the hallway gets dark,","even on a bright day.","And today is not a bright day."]},{slug:"your_bedroom",descriptions:["A small grey-carpeted room with a north-facing window behind dull cotton curtains.","An inflatable twin sized mattress in the center, which you fill every night using a foot-pump.","A single synthetic grey comforter.","An etiolated succulent.","A stand-alone clothing rack."]},{slug:"garage",descriptions:["A dusty storage unit the real-estate agent aspirationally termed a garage.","into which you've managed to squeeze your car.","It is tightly surrounded by various sundries, including a stack of dusty floor tiles and a decrepit washer-dryer combo."]},{slug:"master_bedroom",descriptions:["You scarcely breathe for fear of disturbing this dark room","Even though you know Zach's not home.","This used to be the most beautiful room in the house,","with big south-facing windows vaulted over by a viney philodendron","But now, In addition to the heavy blackout curtains, there's a space heater and a humidifier.","It feels like the South at night."]},{slug:"master_closet",descriptions:["The closet is empty and ","Stuffed messily into one corner are various pages and envelopes"]},{slug:"master_bathroom",descriptions:["Initially, you are surprised by the bathroom's relative cleanliness.","It's certainly not pristine, but there is no obvious grime, no signs of regular use.","But then the smell creeps up on you.","It is of the ocean and the tidal marsh; agricultural runoff and algal blooms.","The stagnant marsh in the southwestern reaches of Puget Sound, or the Salton Sea."]},{slug:"your_bathroom",descriptions:["There is a mirror in front of you.","In a moment of clarity, you see yourself:","Your face thin and hollow.","Your spirit visibly exhausted.","It's been a wretched decade.","Ten years of hell.","From across the house you hear the front door lurch open and slam shut.","Zach is home.","He undoubtedly brought with him a sow","clutching its neck in his strong and sharp mouth","She breathes her final wet and ragged breath as she is slapped down onto the kitchen's yellowed linoleum.","When he finds you, he will ask you to cut the warm heart from the pig and serve it to him.","He will ask you to launder his stinking undergarments.","He will ask you to massage his tremendous and cloven feet.","He will ask you to lance the cysts which erupt from his broad white shoulders.","Any other day you would accede, because he is your son and your love for him is without bound.","But today, you countenance your neglected countertop,","cracked and panned makeup,","overflowing wastebasket,","and see with clear eyes the comfort you take in their familiarity.","How that comfort has destroyed you utterly.","You have an urge to hate yourself for it but there is no time.","He is coming.","You shut the door to the bathroom, holding the knob twisted as it closes to muffle the click of the latch as it comes home.","You turn off the light.","And you stop breathing.","Does he know you are here?","There is nowhere left to go but down.","And down.","And down and down and down."]},{slug:"down",descriptions:["It is completely dark in the bathroom now, so your features are amorphous and imaginary in the mirror.","Just dark shapes in a darker background.","You drown in that shadow image of yourself, passively inventing colors and ideas and patterns,","applying them to the void.","Who are you?","Who do you want to be?","You consider the nothingness in the mirror, and agree with it on principle.","Zach calls for you from across the house."]},{slug:"and_down",descriptions:["Eigengrau: the intrinsic light of total blackness.","The dark grey static that you see in a completely dark environment.","It's caused by the random firing of overexcited cones and rods in your eye.","Or something like that.","It's just about the only thing you remember from an epistemology class you took at PCC, and it comes to you now.","Zach is walking down the hall calling your name. His footfalls rattle the mirror in its frame, which blurs your outline.","A miracle occurs.","you see your self.","all of it","In your infinite and ineffable and perfect way","That I'd tried to describe to you so many times","that you could never see.","You are worthy of love, Hen","I known this like I know the sky is blue.","In this brief moment, you know it too."]},{slug:"and_down_and_down",descriptions:["Zach knocks at the door. Turns the latch impatiently.","Swings open the door","Something magical happens.","You leave.","In fact, you've already left.","You're unsure if you invoked it or what.","You're unsure even about the notion of you-ness.","Skeptical of the utility of the concept.","But I digress:","You're atomized. Ceased, in a real and physical sense."]},{slug:"silence",descriptions:["","","","","Breathe.","","","","You are safe.","","","In an ancient world, Zach burst through the threshold and found the bathroom empty.","He ransacked the house searching for you.","He tore like a beast through the surrounding forest for weeks.","He atrophied in filth and rot","And eventually crumbled to dust.","You cried and screamed from the darkness of your hidden place.","Wanting him back more than you've ever wanted anything","Sick at your failure as a mother","A creature of rage pointed inwards","This is the story of a woman who was trapped until she wasn't.","A story of someone who looked herself in the mirror","and realized all the power she had was in leaving."]},{slug:"coffee_shop",descriptions:["You woke up","It feels good to be outside,","but at no moment in the past several days have you released the tension in your shoulders.","It clings like dirt under your fingernails.","But you have another miraculous experience:","Your tea is sitting on a fragile wooden table besides you, still too hot to drink.","Its steam curls and lengthens with astronomical lazy grace.","Grace, like in the divine sense.","Grace like mercy.","A Cat Stevens song is playing slowly on the radio:","Moon shadow,","Moonshadow","You sense your defenses drop, even if just for a moment,","and you feel exactly as you are meant to feel;","you exist exactly as you ought to exist.","There is hurt deep in your bones that will never completely go away.","Dread that you're suddenly going to wake up from a dream.","A strongly-held belief that you don't deserve happiness","Yet a nagging suspicion that you are worthy of it anyways.","And love.","All alongside a sore throat, from crying.","At this moment, Henrietta walks in."]},{slug:"the_end",descriptions:["Thank you for reading!","I hope you lked it.","The code for this interactive fiction was made by Vincent Colavin and Rebecca Sinclair Colavin","And the prose was all written by Vincent"]}]},25:function(e){e.exports=[{from:"a_quiet_forest",to:"a_path",oneWay:!0},{from:"a_quiet_forest",to:"a_nook"},{from:"a_path",to:"in_front_of_the_house",oneWay:!0},{from:"side_yard",to:"in_front_of_the_house"},{from:"side_yard",to:"backyard"},{from:"in_front_of_the_house",to:"foyer"},{from:"in_front_of_the_house",to:"garage"},{from:"foyer",to:"dining_room"},{from:"kitchen",to:"dining_room"},{from:"hallway",to:"dining_room"},{from:"hallway",to:"master_bedroom"},{from:"master_bedroom",to:"master_closet"},{from:"master_bedroom",to:"master_bathroom"},{from:"hallway",to:"your_bedroom"},{from:"your_bedroom",to:"your_bathroom"},{from:"your_bathroom",to:"down",oneWay:!0},{from:"down",to:"and_down",oneWay:!0},{from:"and_down",to:"and_down_and_down",oneWay:!0},{from:"and_down_and_down",to:"silence",oneWay:!0},{from:"silence",to:"coffee_shop",oneWay:!0},{from:"coffee_shop",to:"the_end",oneWay:!0}]},27:function(e,t,o){e.exports=o(42)},32:function(e,t,o){},42:function(e,t,o){"use strict";o.r(t);var n,a=o(1),i=o.n(a),r=o(21),s=o.n(r),u=(o(32),o(0)),l=o(2),c=o(4),h=o(3),d=o(5),y=o(13),f=o(9),m=o(7),g=o(11);!function(e){e.SET_LOCATION="SET_LOCATION",e.LOCK_CONSOLE="LOCK_CONSOLE",e.RELEASE_CONSOLE="RELEASE_CONSOLE",e.ADD_TO_INVENTORY="ADD_TO_INVENTORY",e.PUSH_HISTORY="PUSH_HISTORY",e.TOGGLE_SOUND="TOGGLE_SOUND",e.CLEAR_HISTORY="CLEAR_HISTORY"}(n||(n={}));var p={location:"",consoleInteractive:!0,inventory:[],history:[],soundOn:!0};var b=Object(g.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_LOCATION:return Object(f.a)({},e,{location:t.value});case n.LOCK_CONSOLE:return Object(f.a)({},e,{consoleInteractive:!1});case n.RELEASE_CONSOLE:return Object(f.a)({},e,{consoleInteractive:!0});case n.ADD_TO_INVENTORY:return Object(f.a)({},e,{inventory:Object(m.a)(e.inventory).concat([t.value])});case n.PUSH_HISTORY:return Object(f.a)({},e,{history:Object(m.a)(e.history).concat([t.value])});case n.CLEAR_HISTORY:return Object(f.a)({},e,{history:[]});case n.TOGGLE_SOUND:return Object(f.a)({},e,{soundOn:!e.soundOn});default:return e}}),w=speechSynthesis.getVoices().filter(function(e){return e.lang.indexOf("en")>=0}),v=w.filter(function(e){return"Moira"===e.name})[0]||w[0],k=w.filter(function(e){return"Victoria"===e.name})[0]||w[0];function O(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,O)}var _=o(23),j=o.n(_),I=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,null,[{key:"pushItem",value:function(t,o){e.historyManifest[o.id]=o.content,t(function(e){return{type:n.PUSH_HISTORY,value:e.id}}(o))}},{key:"clearHistory",value:function(t){e._historyManifest={},t({type:n.CLEAR_HISTORY})}},{key:"getRevocableOutputter",value:function(t){var o=!1,n=j()(e.output)(t),a={revoke:function(){o=!0},output:function(e){return o?Promise.resolve(null):n(e)}};return e.revocableOutputters.push(a),a.output}},{key:"revokeOutputters",value:function(){e.revocableOutputters.forEach(function(e){e.revoke()}),this.revocableOutputters=[]}},{key:"stopOutput",value:function(){this.revokeOutputters(),window.speechSynthesis.cancel(),b.dispatch({type:n.RELEASE_CONSOLE})}}]),e}();I._historyManifest={},I.historyManifest=I._historyManifest,I.revocableOutputters=[],I.output=function(e,t){var o=t.content,n=t.speak,a=Promise.resolve(null);return n&&"string"===typeof o&&(a=function(e){if(!b.getState().soundOn)return Promise.resolve(null);var t=new SpeechSynthesisUtterance(e);return t.pitch=.8,t.voice=k,'"'===e[0]&&'"'===e[e.length-1]&&(t.pitch=1,t.rate=1,t.voice=v),window.speechSynthesis.speak(t),new Promise(function(e){t.onend=function(){window.setTimeout(e,300)}})}(o)),I.pushItem(e,{id:O(),content:o}),a};var S=function(){function e(){Object(u.a)(this,e),this.command="",this.aliases=[],this.helpDescription=""}return Object(l.a)(e,[{key:"run",value:function(e){var t=I.getRevocableOutputter(e.dispatch);return this._run(Object(f.a)({},e,{output:t}))}}]),e}(),T=function(e){function t(){var e,o;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(o=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).command="echo",o.helpDescription="Use echo to say something out loud. Example:\n\necho Is anyone there?",o.aliases=["say"],o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"_run",value:function(e){var t=e.args;return(0,e.output)({content:t.join(" ")}),Promise.resolve(null)}}]),t}(S),A=function(e){function t(){var e,o;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(o=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).command="help",o.helpDescription="Use help to make sense of the world.",o.helpMessage='The Nature of the Beast\nA work of interactive fiction by Vincent Colavin.\n\nContent warning: This story depicts an emotionally abusive parent-child relationship. Descriptions are spoken out loud by your browser by default. Type "mute" to toggle the audio.\n\nHere are some basic commands:\n- List nearby places and objects by typing "list". Places are green, and items are blue.\n- Observe your current location by typing "look".\n- Examine an object by typing "look at <object>".\n- Travel to a location by typing "go <location>".\n- Attempt to pick up an object by typing "pickup <object>".\n- To view this message at any time, type "help".\n\nThe complete list of available commands is: '.concat(Object.keys(X).join(", "),'.\n\nTo get more details for a command, type "help <command>".\n'),o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"_run",value:function(e){var t=e.output,o=e.args;if(o.length>=1){var n=ee[o[0]];t({content:n?"".concat(n.helpDescription).concat(n.aliases.length>0?"\nAliases for this command are: ".concat([n.command].concat(Object(m.a)(n.aliases)).join(", "),"."):""):"I don't know about ".concat(o.join(" "),".")})}else t({content:this.helpMessage});return Promise.resolve(null)}}]),t}(S),E=function e(t){var o=this,n=t.descriptions,a=t.slug;Object(u.a)(this,e),this.hasNeighbor=function(e){return o.neighborSlugs.indexOf(e)>=0},this.hasItem=function(e){return o.itemSlugs.indexOf(e)>=0},this.itemSlugs=[],this.neighborSlugs=[],this.descriptions=n,this.slug=a},Y=o(24),H=o(25),C=o(12),D={},L=!1;var N=D,P=function(e){return i.a.createElement("span",null,e.places.map(function(e){return i.a.createElement("span",{key:e,className:"place"},e,se)}),e.items.map(function(e){return i.a.createElement("span",{key:e,className:"item"},e,se)}))},x=function(e){function t(){var e,o;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(o=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).command="list",o.aliases=["ls"],o.helpDescription="list the locations and objects you can reach from where you are now.",o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"_run",value:function(e){var t=e.output,o=e.state.location;return t({content:i.a.createElement(P,{places:N[o].neighborSlugs.sort(),items:N[o].itemSlugs.sort()})}),Promise.resolve(null)}}]),t}(S),W=["I don't remember","But I am glad you asked. I am glad you are here.","I don't know who you are","I'm sorry for that...","To the best of my knowledge, you are an echo.","You were a mistake","insofar as any human being could be a mistake."],R=function(e){function t(){var e,o;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(o=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).command="whoami",o.helpDescription="Ask a difficult question. Get a difficult response",o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"_run",value:function(e){var t=e.output;return W.reduce(function(e,o){return e.then(function(){return t({content:o,speak:!0})})},Promise.resolve(null))}}]),t}(S),V=function e(t){var o=t.descriptions,n=t.slug,a=t.locationSlug,i=t.takeable;Object(u.a)(this,e),this.descriptions=o,this.slug=n,this.locationSlug=a,this.takeable=i},M={},B=!1;var U=M,Z=function(e){function t(){var e,o;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(o=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).getTabCompleteOptions=function(e,t){var o=e.location;return N[o].itemSlugs.filter(function(e){return 0===e.indexOf(t)})},o.command="look",o.aliases=["l"],o.helpDescription="Use look to take a good look around.",o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"_run",value:function(e){var t=e.output,o=e.args,n=e.state.location,a="at"===o[0]?U[o[1]]:U[o[0]];return(a?a.descriptions:N[n].descriptions).reduce(function(e,o){return e.then(function(){return t({content:o,speak:!0})})},Promise.resolve(null))}}]),t}(S),q=function(e){function t(){var e,o;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(o=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).getTabCompleteOptions=function(e,t){var n=e.location,a=t.split("/"),i=a.splice(0,a.length-1),r=a[a.length-1];if(!o.locationChainValid(i))return[];var s=0===i.length?N[n]:N[i[i.length-1]];if(!s)return[];var u=s.neighborSlugs.filter(function(e){return 0===e.indexOf(r)});if(1===u.length){var l=0===i.length?"":"".concat(i.join("/"),"/");return["".concat(l).concat(u[0],"/")]}return u},o.locationChainValid=function(e){return 0===e.length||e.reduce(function(e,t,o,n){if(0===o)return!!N[t];var a=N[n[o-1]];return e&&a.hasNeighbor(t)},!0)},o.command="goto",o.aliases=["cd","go","g"],o.helpDescription="Use goto to move to a new location. For example:\n\n goto a_cold_cabin",o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"_run",value:function(e){var t=e.args,o=e.output,a=e.dispatch,i=Promise.resolve(null);if(0===t.length)return o({content:"location must be specified"}),i;var r=t[0].split("/").filter(function(e){return e}),s=r[r.length-1];return this.locationChainValid(r)?(a({type:n.SET_LOCATION,value:s}),z({location:s})):o({content:"".concat(s," is not a valid location")}),i}}]),t}(S);function z(e){var t=e.location;window.location.hash=t}var G=function(e){function t(){var e,o;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(o=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).interval=0,o.state={content:(new Date).getTime().toString()},o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=window.setInterval(function(){e.setState({content:(new Date).getTime().toString()})},1e3)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.interval)}},{key:"render",value:function(){return this.state.content}}]),t}(i.a.Component),K=function(e){function t(){var e,o;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(o=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).command="time",o.helpDescription="time tells you the time",o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"_run",value:function(e){return(0,e.output)({content:i.a.createElement(G,null)}),Promise.resolve(null)}}]),t}(S),F=function(e){function t(){var e,o;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(o=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).command="get",o.helpDescription="pickup will allow you to add an object to your inventory",o.aliases=["pickup","grab","take"],o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"_run",value:function(e){var t=e.args,o=e.output,a=e.state.location,i=e.dispatch,r=t[0],s=N[a];return U[r]&&s.hasItem(r)?U[r].takeable?(s.itemSlugs=s.itemSlugs.filter(function(e){return e!==r}),i({type:n.ADD_TO_INVENTORY,value:r}),o({content:"You have picked up ".concat(r)})):o({content:"You cannot pick up ".concat(r)}):o({content:"There is no ".concat(r," here")}),Promise.resolve(null)}}]),t}(S),J=function(e){function t(){var e,o;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(o=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).command="inventory",o.helpDescription="List all the items currently in your inventory.",o.aliases=["inv"],o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"_run",value:function(e){return(0,e.output)({content:e.state.inventory.join(se)}),Promise.resolve(null)}}]),t}(S),$=function(e){function t(){var e,o;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(o=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).command="mute",o.aliases=["quiet"],o.helpDescription='toggle whether descriptions generated by "look" should be read out loud',o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"_run",value:function(e){var t=e.output,o=e.dispatch,a=e.state.soundOn;return o({type:n.TOGGLE_SOUND}),t({content:"Sound has been turned ".concat(a?"off":"on",".")}),Promise.resolve(null)}}]),t}(S),Q=function(e){function t(){var e,o;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(o=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).command="clear",o.helpDescription="Clears the screen.",o.aliases=["cl"],o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"_run",value:function(e){var t=e.dispatch;return I.clearHistory(t),Promise.resolve(null)}}]),t}(S),X={},ee={},te=!1;var oe=o(8);var ne=Object(oe.b)(function(e){return{terminalHistory:e.history}})(function(e){var t=e.terminalHistory;return i.a.createElement("div",{className:"terminal-buffer"},t.map(function(e){return i.a.createElement("p",{className:"terminal-buffer-item",key:e},I.historyManifest[e])}))}),ae=function(e){function t(e){var o;return Object(u.a)(this,t),(o=Object(c.a)(this,Object(h.a)(t).call(this,e))).state={commandHistory:[],currentPlaceInHistory:-1,inputValue:""},o.focusInput=function(){o.inputEl.current&&o.inputEl.current.focus()},o.goBackInHistory=function(){o.setState(function(e){return e.currentPlaceInHistory===e.commandHistory.length-1?null:{currentPlaceInHistory:e.currentPlaceInHistory+1}},function(){var e=o.state.commandHistory[o.state.currentPlaceInHistory];e&&o.setState({inputValue:e.content})})},o.goForwardInHistory=function(){o.setState(function(e){return-1===e.currentPlaceInHistory?null:{currentPlaceInHistory:e.currentPlaceInHistory-1}},function(){-1===o.state.currentPlaceInHistory&&o.setState({inputValue:""});var e=o.state.commandHistory[o.state.currentPlaceInHistory];e&&o.setState({inputValue:e.content})})},o.moveCursorToEnd=function(){window.setTimeout(function(){o.inputEl.current&&(o.inputEl.current.selectionStart=1e3)},0)},o.handleChange=function(e){o.setState({inputValue:e.target.value})},o.handleKeyDown=function(e){switch(e.key){case"ArrowUp":o.goBackInHistory(),o.moveCursorToEnd();break;case"ArrowDown":o.goForwardInHistory(),o.moveCursorToEnd();break;case"Tab":e.preventDefault(),o.tabComplete();break;case"Enter":e.preventDefault(),o.addToCommandHistory(o.state.inputValue),o.props.handleSubmit(o.state.inputValue),o.setState({inputValue:""})}},o.addToCommandHistory=function(e){o.setState(function(t){return{commandHistory:[{content:e,id:O()}].concat(Object(m.a)(t.commandHistory)),currentPlaceInHistory:-1}})},o.tabComplete=function(){var e=o.state.inputValue.split(" "),t=Object(y.a)(e),n=t[0],a=t.slice(1);if(0!==a.length){var i=a[a.length-1]||"",r=ee[n],s=o.props,u=s._state,l=s.inventory,c=s.location,h=N[c],d=r&&r.getTabCompleteOptions?r.getTabCompleteOptions(u,i):Object(m.a)(h.neighborSlugs).concat(Object(m.a)(h.itemSlugs),Object(m.a)(l)).filter(function(e){return 0===e.indexOf(i)});switch(d.length){case 0:break;case 1:var f=[n].concat(Object(m.a)(a.slice(0,a.length-1)),[d[0]]).join(" ");o.setState({inputValue:f});break;default:var g=o.props.dispatch;I.output(g,{content:"".concat(re(c)).concat(o.state.inputValue)}),I.output(g,{content:d.join(se)})}}},o.inputEl=i.a.createRef(),o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.focusInput)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.focusInput)}},{key:"render",value:function(){return i.a.createElement("input",{className:"input",type:"text",onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.inputEl,value:this.state.inputValue})}}]),t}(i.a.Component),ie=Object(oe.b)(function(e,t){var o=t.handleSubmit;return{_state:e,location:e.location,inventory:e.inventory,handleSubmit:o}})(ae);function re(e){return"~/".concat(e," > ")}var se="    ",ue=function(e){function t(){var e,o;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(o=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).handleKeydown=function(e){var t=e,o=t.key;("Escape"===o||t.ctrlKey&&["c","C","d","D"].indexOf(o)>=0)&&I.stopOutput()},o.runCommand=function(e){var t=o.props,a=t.dispatch,i=t._state,r=t.location,s=e.trim().split(" "),u=Object(y.a)(s),l=u[0],c=u.slice(1),h=ee[l];I.output(a,{content:"".concat(re(r)).concat(e)}),h?(a({type:n.LOCK_CONSOLE}),h.run({args:c,dispatch:a,state:i}).then(function(){a({type:n.RELEASE_CONSOLE})}).catch(console.error)):I.output(a,{content:"I don't know how to ".concat(l)})},o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeydown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeydown)}},{key:"render",value:function(){var e=this.props,t=e.consoleInteractive,o=e.location;return i.a.createElement("div",{className:"terminal"},i.a.createElement(ne,null),i.a.createElement("form",{className:"input-form ".concat(t?"active":"")},i.a.createElement("span",{className:"input-prompt"},re(o)),i.a.createElement(ie,{handleSubmit:this.runCommand})))}}]),t}(i.a.Component),le=Object(oe.b)(function(e){return{_state:e,consoleInteractive:e.consoleInteractive,location:e.location}})(ue),ce="a_quiet_forest",he=function(e){function t(e){var o;Object(u.a)(this,t),o=Object(c.a)(this,Object(h.a)(t).call(this,e));var a=e.dispatch,i=e.state;return L||(L=!0,Y.forEach(function(e){D[e.slug]=new E(e)}),H.forEach(function(e){var t=e.from,o=e.to,n=e.oneWay;if(!D[t])throw"".concat(t," is an invalid location");if(!D[o])throw"".concat(o," is an invalid location");D[t].neighborSlugs.push(o),n||D[o].neighborSlugs.push(t)}),C.forEach(function(e){if(!D[e.locationSlug])throw"".concat(e.slug," has location ").concat(e.locationSlug,", which does not exist");D[e.locationSlug].itemSlugs.push(e.slug)})),te||(te=!0,[new T,new A,new x,new R,new q,new Z,new K,new F,new J,new $,new Q].forEach(function(e){X[e.command]=e,ee[e.command]=e,e.aliases.forEach(function(t){ee[t]=e})})),B||(B=!0,C.forEach(function(e){M[e.slug]=new V(e)})),z({location:ce}),b.dispatch({type:n.SET_LOCATION,value:ce}),X.help.run({args:[],dispatch:a,state:i}),o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(le,null)}}]),t}(i.a.Component),de=Object(oe.b)(function(e){return{state:e}})(he);s.a.render(i.a.createElement(oe.a,{store:b},i.a.createElement(de,null)),document.getElementById("root"))}},[[27,2,1]]]);
//# sourceMappingURL=main.302e2ef6.chunk.js.map